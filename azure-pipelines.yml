trigger:
- master

pr:
- master

variables:
- name: CMAKE_VERSION
  value: 3.26.3
- name: NDK_VERSION
  value: 25.2.9519653
- name: UNITY_BUILD
  value: true
- name: XCODE_VERSION
  value: 15.4

jobs:

# Installation tests. 
  - template: .github/jobs/test_install_win32.yml
    parameters:
      name: Win32_Installation
      vmImage: 'windows-latest'
      platform: x64
  - template: .github/jobs/test_install_linux.yml
    parameters:
      name: Linux_Installation
      vmImage: 'ubuntu-latest'
      JSEngine: JavaScriptCore
  - template: .github/jobs/test_install_macos.yml
    parameters:
      name: MacOS_Installation
      vmImage: 'macOS-14'
  - template: .github/jobs/test_install_ios.yml
    parameters:
      name: iOS_Installation
      vmImage: 'macOS-14'
      deploymentTarget: 17.2

# These Android tests are unstable on the CI emulator. Disabled until a more reliable solution is found.
#  - template: .github/jobs/android_tests.yml
#    parameters:
#      name: Android_Tests_MacOS_JSC
#      vmImage: 'macOS-latest'
#      JSEngine: JavaScriptCore
#
#  - template: .github/jobs/android_tests.yml
#    parameters:
#      name: Android_Tests_MacOS_V8
#      vmImage: 'macOS-latest'
#      JSEngine: V8
